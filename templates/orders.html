{% extends 'base.html' %}
{% block content %}

<h2 class="title">My Orders</h2>

{% for order in orders %}
<div class="order-card">

  <div>
    <b>Order #{{ order.id }}</b><br>
    <small>{{ order.ordered_at|date:"d M Y, h:i A" }}</small><br>
    <span class="status {{ order.status|lower }}">{{ order.status }}</span>
  </div>

  <h3>â‚¹{{ order.total_price }}</h3>

  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-track">
      <div class="progress-fill status-{{ order.status|lower }}"></div>
    </div>

    <div class="progress-steps">
      <span class="{% if order.status in 'Pending Preparing Out Delivered' %}active{% endif %}">Pending</span>
      <span class="{% if order.status in 'Preparing Out Delivered' %}active{% endif %}">Preparing</span>
      <span class="{% if order.status in 'Out Delivered' %}active{% endif %}">Out</span>
      <span class="{% if order.status == 'Delivered' %}active{% endif %}">Delivered</span>
    </div>
  </div>

</div>
{% empty %}
<p>No orders yet.</p>
{% endfor %}

<style>
.order-card {
  background:white;
  padding:20px;
  border-radius:16px;
  margin-bottom:18px;
  box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

.status {
  padding:4px 10px;
  border-radius:20px;
  font-size:12px;
  background:#eee;
}

.pending { background:#fff3cd; color:#856404; }
.preparing { background:#cce5ff; color:#004085; }
.out { background:#ffeeba; color:#856404; }
.delivered { background:#d4edda; color:#155724; }

/* Progress bar */
.progress-container { margin-top: 12px; }

.progress-track {
  width:100%;
  height:8px;
  background:#eee;
  border-radius:10px;
  overflow:hidden;
}

.progress-fill {
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#ff9800,#ff5722);
  transition:.4s;
}

.status-pending { width:25%; }
.status-preparing { width:50%; }
.status-out { width:75%; }
.status-delivered { width:100%; background:linear-gradient(90deg,#4caf50,#2e7d32); }

.progress-steps {
  display:flex;
  justify-content:space-between;
  font-size:12px;
  margin-top:6px;
  color:#999;
}

.progress-steps span.active {
  color:#ff5722;
  font-weight:600;
}
</style>

{% endblock %}
